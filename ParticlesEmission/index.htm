<!DOCTYPE>
<head>
<title>Particles</title>
<style>
  margin: 0; padding: 0;
  width: 100%; height: 100%;
  overflow: hidden;
  background: #171819;
</style>
</head>
<body>
	<canvas id="canvas"></canvas>
	<script>
    	var canvas = document.getElementById('canvas');
		var ctx = canvas.getContext('2d');
		var screen_width = window.innerWidth;
		var screen_height = window.innerHeight;
		
		//Set canvas to the browser screen size
		canvas.width = screen_width;
		canvas.height = screen_height;
		
		
		//For Particle
		
		//Array for storing particles
		var particles = [];
		var max_particles = 100;
		
		//Object for each particle
		var Particle = {
				x : screen_width/2,
				y : screen_height/2,
				x_speed : 10,
				y_speed : 10,
				radius : 10,
				bg_color : "#000"
			};
		
		// Particle method for drawing circle	
		Particle.draw = function(){
			ctx.beginPath();
			ctx.fillStyle = this.bg_color;
			ctx.arc(this.x, this.y, this.radius, 0, Math.PI*2, false);
			ctx.closePath();
			ctx.fill();
		}
		
		
		
		
		// Move create particle into a function and add to the particle's array;
		function createParticle(){
			var newParticle = Object.create(Particle);
			particles.push(newParticle);
		}
		
		// Animate the particle
		function animate(){
			//clear canvas
			ctx.clearRect(0,0,screen_width, screen_height);
			
			console.log(particles.length);
			
			for(var i=0; i< particles.length; i++){
				var particle = particles[i];
				
				//For memory - remove a particle from the array when it hit max particle allowed 
				if( particles.length >= max_particles) particles.shift();

				//Create/add a new particle
				particle.draw();	
				particle.x -= particle.x_speed * Math.random();;
				particle.y -= particle.y_speed * Math.random();
			}
			
		
		}
		
		
		// Set interval for creating animation
		setInterval(function(){
			createParticle();
			animate();	
			
		}, 20);		
		
		
    </script>
</body>
</html>
